webpackJsonp([1],{"+GjM":function(e,t){},"07+g":function(e,t){},"7zck":function(e,t){},CaFx:function(e,t){},"FT/n":function(e,t){},K8Mk:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),a=n("Xxa5"),s=n.n(a),o=n("exGp"),i=n.n(o),c=n("mtWM"),l=n.n(c),u=n("NYxO"),d=n("424j");r.default.use(u.a);var p=new u.a.Store({strict:!0,state:{accessToken:null,refreshToken:null,user:null},plugins:[Object(d.a)()],mutations:{setUser:function(e,t){e.user=t},setAccessToken:function(e,t){e.accessToken=t},setRefreshToken:function(e,t){e.refreshToken=t}},getters:{isLogged:function(e){return function(){return Boolean(e.user)}}},actions:{setUser:function(e,t){(0,e.commit)("setUser",t)},setAccessToken:function(e,t){(0,e.commit)("setAccessToken",t)},setRefreshToken:function(e,t){(0,e.commit)("setRefreshToken",t)}}}),v={ROOT_URL:""},h=function(){return new l.a.create({baseURL:v.ROOT_URL})},f=function(e,t){return console.log(e,t),new l.a.create({baseURL:v.ROOT_URL,auth:{username:e,password:t}})},m=function(){return new l.a.create({baseURL:v.ROOT_URL,headers:{authorization:"Bearer "+p.state.accessToken}})},g=function(){return new l.a.create({baseURL:v.ROOT_URL,headers:{Authorization:"Bearer "+p.state.refreshToken}})},w={refreshToken:function(){var e=this;return i()(s.a.mark(function t(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g().get("/api/v1/auth/token");case 3:if(!(n=e.sent).data.success){e.next=9;break}return p.dispatch("setAccessToken",n.data.tokens.access),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",!1);case 16:case"end":return e.stop()}},t,e,[[0,12]])}))()},login:function(e){return f(e.username,e.password).post("/api/v1/auth/login")},signup:function(e){return h().post("/api/v1/auth/register",e)},logout:function(e){return m(e.username,e.password).post("/api/v1/auth/logout")}},x={addNewFolder:function(e,t){return console.log(e),console.log("/api/v1/my-drive/"+e),m().post("/api/v1/my-drive/"+e,t)},removeFolder:function(e){return console.log("/api/v1/my-drive/"+e),m().delete("/api/v1/my-drive/"+e)},renameFolder:function(e,t){return console.log("api/v1/my-drive/"+e),m().put("/api/v1/my-drive/"+e,t)},addNewFile:function(e,t){var n=new FormData;for(var r in t)n.append(r,t[r]);return console.log("<<<<<"),console.log(n),m().post("/api/v1/my-drive/"+e,n)},get:function(e){var t=this,n="/api/v1/my-drive/";return e&&(n+=""+e),console.log(n),m().get(n).catch(function(){var n=i()(s.a.mark(function n(r){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(401!=r.response.status){n.next=10;break}return n.next=3,w.refreshToken();case 3:if(!n.sent){n.next=7;break}return n.abrupt("return",t.get(e));case 7:throw r;case 8:n.next=11;break;case 10:throw r;case 11:case"end":return n.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}())},getPath:function(e){return m().get("/api/v1/my-drive/"+e+"/path")},copyFolder:function(e){return console.log("api/v1/my-drive/"+e+"/copy"),m().get("/api/v1/my-drive/"+e+"/copy")},shareFolder:function(e,t){return m().post("/api/v1/my-drive/"+e+"/share",t)},getSharedFolder:function(e){return m().get("/api/v1/shared/"+e)},getSharedTree:function(e){return m().get("api/v1/shared/"+e+"/tree")},showFile:function(e){return m().get("/api/v1/my-drive/"+e+"/file",{responseType:"blob"})},getFileType:function(e){return m().get("/api/v1/my-drive/"+e+"/fileType")},getFileInfo:function(e){return m().get("/api/v1/my-drive/"+e+"/fileInfo")},findByName:function(e,t){var n="/api/v1/my-drive/find?";return e&&(console.log("true"),n+="name="+e+"&"),console.log(n),m().get(n)}},_={components:{},data:function(){return{drawer:null,items:[{icon:"lightbulb_outline",text:"Notes"},{icon:"touch_app",text:"Reminders"},{divider:!0},{heading:"Labels"},{icon:"add",text:"Create new label"},{divider:!0},{icon:"archive",text:"Archive"},{icon:"delete",text:"Trash"},{divider:!0},{icon:"settings",text:"Settings"},{icon:"chat_bubble",text:"Trash"},{icon:"help",text:"Help"},{icon:"phonelink",text:"App downloads"},{icon:"keyboard",text:"Keyboard shortcuts"}],menuOptions:[{id:"profile",label:"Profile",icon:"perm_identity"},{type:"divider"},{id:"signOut",label:"Sign Out",icon:"exit_to_app"}],Menu:{data:{}}}},props:{source:String},methods:{onCtxOpen:function(e){this.Menu.data=e},menuCall:function(e){var t=this;return i()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("profile"==e.id&&t.$router.push({name:"Profile"}),"signOut"!=e.id){n.next=13;break}return n.prev=2,n.next=5,w.logout({username:t.$store.state.username,password:t.$store.state.password});case 5:n.next=9;break;case 7:n.prev=7,n.t0=n.catch(2);case 9:t.$store.dispatch("setUser",null),t.$store.dispatch("setAccessToken",null),t.$store.dispatch("setRefreshToken",null),t.$router.push({name:"Start"});case 13:case"end":return n.stop()}},n,t,[[2,7]])}))()}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{attrs:{color:"amber",app:"",fixed:"","clipped-left":"",dense:""}},[n("v-icon",[e._v("cloud")]),e._v(" "),n("span",{staticClass:"title"},[e._v(" Carpdrive ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(t){t.preventDefault(),e.$refs.ctx.open(t,e.item)}}},[n("v-icon",[e._v("face")])],1),e._v(" "),n("context-menu",{ref:"ctx",on:{"ctx-open":e.onCtxOpen}},[n("ui-menu",{staticClass:"text-xs-left",attrs:{"contain-focus":"","has-icons":"","has-secondary-text":"",options:e.menuOptions},on:{select:function(t){e.menuCall(t)}}})],1)],1)},staticRenderFns:[]},b={name:"app",data:function(){return{msg:"lena"}},components:{myHeader:n("VU/8")(_,k,!1,null,null,null).exports}},y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("v-app",[t("my-header"),this._v(" "),t("v-content",[t("router-view")],1)],1)],1)},staticRenderFns:[]},F=n("VU/8")(b,y,!1,function(e){n("K8Mk")},null,null).exports,D=n("/ocq"),$={data:function(){return{show:!1,create:{name:null,isFolder:!0},rules:{required:function(e){return!!e||"Required."}}}},props:["open"],watch:{open:function(){this.show=Boolean(this.open),this.create.name=null}},methods:{addNewFolder:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.create.name&&e.$emit("add",e.create);case 1:case"end":return t.stop()}},t,e)}))()},closeDialog:function(){this.$emit("close"),this.create.name=null}}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",[n("h1",[e._v("Create new folder")])]),e._v(" "),n("hr"),e._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Folder name","prepend-icon":"folder",rules:[e.rules.required],autofocus:""},model:{value:e.create.name,callback:function(t){e.$set(e.create,"name",t)},expression:"create.name"}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.addNewFolder()}}},[e._v("Create")]),e._v(" "),n("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){e.closeDialog()}}},[e._v("Cancel")])],1)],1)],1)],1)},staticRenderFns:[]},I={components:{addDialog:n("VU/8")($,R,!1,null,null,null).exports},props:["path","clearFilterString","edit"],watch:{clearFilterString:function(){this.clearFilterString&&(this.filterString="")}},data:function(){return{folderID:null,item:{info:null,children:null},create:!1,filterString:""}},methods:{addNewFolder:function(e){var t=this;return i()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.closeAddDialog(),t.$emit("addNewItem",e);case 2:case"end":return n.stop()}},n,t)}))()},openAddDialog:function(){this.create=!0},closeAddDialog:function(){this.create=!1},hookUploadFile:function(e,t){var n=this;return i()(s.a.mark(function r(){var a;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a={name:e.name,img:e.raw},n.$emit("addNewFile",a),t.splice(0,t.length);case 3:case"end":return r.stop()}},r,n)}))()},clickPath:function(e){var t=this;return i()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$route.push({name:"Drive",params:{id:e.id}});case 1:case"end":return n.stop()}},n,t)}))()},changeFilter:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$emit("changeFilter",e.filterString);case 1:case"end":return t.stop()}},t,e)}))()},showInfoSidebar:function(){this.$emit("toggleInfoSidebar")}}},T={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("v-toolbar",{attrs:{color:"grey lighten-3"}},[n("v-icon",[e._v("folder")]),e._v(" "),n("v-breadcrumbs",{attrs:{divider:"/"}},e._l(e.path,function(t){return n("v-breadcrumbs-item",{key:t.name,attrs:{disabled:!1,to:{name:"Drive",params:{id:t.id}}}},[e._v("\n          "+e._s(t.name)+"\n      ")])})),e._v(" "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{label:"Search","prepend-icon":"search"},on:{input:function(t){e.changeFilter()}},model:{value:e.filterString,callback:function(t){e.filterString=t},expression:"filterString"}}),e._v(" "),e.edit?[n("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.openAddDialog()}}},[n("v-icon",[e._v("create_new_folder")])],1),e._v(" "),n("el-upload",{ref:"list",staticClass:"upload-demo",attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":e.hookUploadFile}},[n("v-btn",{attrs:{icon:""}},[n("v-icon",[e._v("file_upload")])],1)],1)]:e._e(),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.showInfoSidebar()}}},[n("v-icon",[e._v("info")])],1)],2),e._v(" "),n("add-dialog",{attrs:{open:e.create,hidden:""},on:{close:function(t){e.closeAddDialog()},add:e.addNewFolder}})],1)},staticRenderFns:[]},S=n("VU/8")(I,T,!1,null,null,null).exports,U={components:{Toolbar:S},data:function(){return{defaultProps:{children:"children",label:"name"}}},props:["toggle","setNewNode","tree"],watch:{toggle:function(){console.log(1),this.UI.isShown=!this.UI.isShown,console.log(this.UI.isShown),this.tree&&(this.tree=[{name:"Level two 2-1",children:[{name:"Level three 2-1-1"}]}])}},methods:{handleNodeClick:function(){var e=i()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$router.push({name:this.$router.name,params:{id:t._id}});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},L={render:function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("el-tree",{ref:"tree",attrs:{props:this.defaultProps,data:this.tree,"expand-on-click-node":!1,"node-key":"id"},on:{"node-click":this.handleNodeClick}})],1)},staticRenderFns:[]},M=n("VU/8")(U,L,!1,null,null,null).exports,N={components:{VListTileAction:n("rhbk").a,TreeItem:M},data:function(){return{UI:{isShown:!0,isMini:!0},navigation:[{id:"Drive",icon:"cloud"},{id:"ShareWithMe",icon:"folder_shared"},{id:"Loading",items:["some file"]}],activeItem:null}},props:["tree"],methods:{toggleSize:function(e){e!=this.activeItem&&this.activeItem||(this.UI.isMini=!this.UI.isMini)},chooseItem:function(e){var t=this;return i()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:"Drive"==e.id&&t.$router.push({name:e.id,params:{id:t.$store.state.user.myDrive}}),"ShareWithMe"==e.id&&t.$router.push({name:e.id,params:{id:t.$store.state.user.sharedWithMe.id}}),t.toggleSize(e),t.activeItem=e;case 4:case"end":return n.stop()}},n,t)}))()}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{"mini-variant":e.UI.isMini,fixed:"",clipped:"",permanent:!0,app:""}},[n("v-layout",[n("v-flex",[n("v-list",e._l(e.navigation,function(t){return n("v-list-group",{key:t.title,on:{click:function(n){e.chooseItem(t)}}},[n("v-list-tile",{attrs:{slot:"item"},slot:"item"},["Loading"!=t.id?[n("v-list-tile-action",[n("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))])],1)]:[e._l(t.items,function(e){})]],2)],1)}))],1),e._v(" "),n("v-flex",{directives:[{name:"show",rawName:"v-show",value:!e.UI.isMini&&"Loading"!=e.activeItem.id,expression:"!UI.isMini && activeItem.id!='Loading'"}],attrs:{xs9:""}},[n("tree-item",{attrs:{tree:e.tree}})],1)],1)],1)},staticRenderFns:[]},C=n("VU/8")(N,E,!1,null,null,null).exports,A=n("lDdF"),O=n.n(A),P={data:function(){return{show:!1,id:null,data:null,blob:null,type:null}},props:["open","item"],watch:{open:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.id=e.item._id,e.show=Boolean(e.open),console.log(e.item),t.next=5,e.getFileInfo();case 5:return t.next=7,e.getFileType();case 7:return t.next=9,e.fileNext();case 9:case"end":return t.stop()}},t,e)}))()}},methods:{closeDialog:function(){this.$emit("close")},getFileType:function(){var e=this;return i()(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getFileType(e.id);case 3:(n=t.sent).data.success&&(r=n.data.type.split("/"),e.type=r[0]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},showFile:function(){var e=this;return i()(s.a.mark(function t(){var n,r,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("SHOW FILE ENTER"),t.next=4,x.showFile(e.id);case 4:n=t.sent,console.log("SUCCESS"),r=e,(a=new FileReader).onload=function(e){r.$refs.preview.src=a.result},a.readAsDataURL(n.data),e.blob=n.data,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,e,[[0,13]])}))()},getFileInfo:function(){var e=this;return i()(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getFileInfo(e.id);case 3:n=t.sent,console.log(n.data),e.data=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},fileNext:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.showFile();case 1:case"end":return t.stop()}},t,e)}))()},downloadFile:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:O.a.saveAs(e.blob,e.data.filename);case 1:case"end":return t.stop()}},t,e)}))()}}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition",overlay:!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.closeDialog()}}},[n("v-icon",[e._v("close")])],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-title",[e._v(e._s(e.item.name))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){t.stopPropagation(),e.downloadFile()}}},[n("v-icon",[e._v("file_download")])],1)],1)],1),e._v(" "),n("v-card-text",[n("div",[n("iframe",{ref:"preview",attrs:{width:"100%",height:"700px",frameborder:"0"}})])])],1)],1)],1)},staticRenderFns:[]},W={components:{ShowFile:n("VU/8")(P,V,!1,null,null,null).exports},data:function(){return{previewURL:"/static/image/folderYellow.svg",folderID:null,type:"file",showFileDialog:!1}},props:["item"],watch:{item:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.item.isFolder){t.next=4;break}return t.next=3,e.getFileType();case 3:"image"==e.type[0]?e.loadPreview():"pdf"==e.type[1]&&(e.previewURL="/static/image/pdf.svg");case 4:case"end":return t.stop()}},t,e)}))()}},created:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.item.isFolder){e.next=4;break}return e.next=3,this.getFileType();case 3:"image"==this.type[0]?this.loadPreview():"pdf"==this.type[1]&&(this.previewURL="/static/image/pdf.svg");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{loadPreview:function(){var e=new FileReader,t=this;e.onload=function(n){console.log(n),t.previewURL=e.result},x.showFile(this.item._id).then(function(e){return console.log("success"),e.data}).then(function(t){e.readAsDataURL(t)}).catch(function(e){console.log(e)})},show:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.item.isFolder){t.next=4;break}e.$router.push({name:e.$router.name,params:{id:e.item._id}}),t.next=6;break;case 4:return t.next=6,e.showFile();case 6:case"end":return t.stop()}},t,e)}))()},showFile:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.openShowItemDialog();case 1:case"end":return t.stop()}},t,e)}))()},openShowItemDialog:function(){this.showFileDialog=!this.showFileDialog},closeShowItemDialog:function(){this.showFileDialog=!1},getFileType:function(){var e=this;return i()(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getFileType(e.item._id);case 3:(n=t.sent).data.success&&(r=n.data.type.split("/"),e.type=r),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),e.type="file";case 11:case"end":return t.stop()}},t,e,[[0,7]])}))()}},computed:{rootURL:function(){return v.ROOT_URL}}},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("a",{on:{click:e.show}},[n("v-card",{attrs:{height:"170px"}},[e.item.isFolder?[n("v-card-media",{attrs:{src:"/static/image/folderImage.svg",height:"100px",contain:""}})]:[n("v-card-media",{attrs:{src:e.previewURL,height:"100px",contain:""}})],e._v(" "),n("v-card-title",{attrs:{"primary-title":""}},[n("div",{attrs:{id:"title"}},[n("h3",{staticClass:"headline mb-0"},[e._v(e._s(e.item.name))])])]),e._v(" "),n("v-card-actions")],2)],1),e._v(" "),n("show-file",{attrs:{open:e.showFileDialog,item:e.item},on:{close:function(t){e.closeShowItemDialog()}}})],1)},staticRenderFns:[]},q=n("VU/8")(W,z,!1,function(e){n("NREx")},"data-v-14f3c631",null).exports,B={data:function(){return{show:!1,create:{name:null}}},props:["open","oldName"],watch:{open:function(){this.show=this.open,console.log(2)}},methods:{renameFolder:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("___________"),console.log(e.create),e.$emit("rename",e.create);case 3:case"end":return t.stop()}},t,e)}))()},closeDialog:function(){this.$emit("close")}}},Z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"500px"},on:{close:function(t){e.closeDialog()}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",[n("h1",[e._v("Rename folder")])]),e._v(" "),n("hr"),e._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Folder name","prepend-icon":"folder",autofocus:""},model:{value:e.create.name,callback:function(t){e.$set(e.create,"name",t)},expression:"create.name"}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.renameFolder()}}},[e._v("Rename")]),e._v(" "),n("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){e.closeDialog()}}},[e._v("Cancel")])],1)],1)],1)},staticRenderFns:[]},j=n("VU/8")(B,Z,!1,null,null,null).exports,H={data:function(){return{show:!1,share:{username:null}}},props:["open"],watch:{open:function(){this.show=this.open,console.log(2)}},methods:{shareFolder:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.share),e.$emit("share",e.share);case 2:case"end":return t.stop()}},t,e)}))()},closeDialog:function(){this.$emit("close")}}},G={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"500px"},on:{close:function(t){e.closeDialog()}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",[n("h1",[e._v("Shared folder")])]),e._v(" "),n("hr"),e._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Enter username","prepend-icon":"face",required:"",autofocus:""},model:{value:e.share.username,callback:function(t){e.$set(e.share,"username",t)},expression:"share.username"}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.shareFolder()}}},[e._v("Share")]),e._v(" "),n("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){e.closeDialog()}}},[e._v("Cancel")])],1)],1)],1)},staticRenderFns:[]},Y=n("VU/8")(H,G,!1,null,null,null).exports,K=n("aE66"),J={components:{Drag:K.Drag,Drop:K.Drop},methods:{handleDrop:function(e,t){var n=this;return i()(s.a.mark(function e(){var r,a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.dataTransfer.files,console.log(r[0]),a={name:r[0].name,img:r[0],isFolder:!1},e.prev=4,console.log("enter"),e.next=8,x.addNewFile(n.$route.params.id,a);case 8:(o=e.sent).data.success&&(console.log("addFile"),n.$emit("addFile",o.data.folder)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}},e,n,[[4,12]])}))()}}},X={render:function(){var e=this.$createElement;return(this._self._c||e)("drop",{staticClass:"drop-area fullscreen",on:{drop:this.handleDrop}})},staticRenderFns:[]},Q=n("VU/8")(J,X,!1,function(e){n("07+g")},"data-v-5aca4642",null).exports,ee=n("BO1k"),te=n.n(ee),ne={setAvatar:function(e,t){var n=this,r=new FormData;for(var a in t)r.append(a,t[a]);return console.log("======"),console.log("/api/v1/user/"+e+"/setAvatar"),m().post("/api/v1/user/"+e+"/setAvatar",r).catch(function(){var t=i()(s.a.mark(function t(r){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(401!=r.response.status){t.next=10;break}return t.next=3,w.refreshToken();case 3:if(!t.sent){t.next=7;break}return t.abrupt("return",n.get(e));case 7:throw r;case 8:t.next=11;break;case 10:throw r;case 11:case"end":return t.stop()}},t,n)}));return function(e){return t.apply(this,arguments)}}())},showAvatar:function(e){return console.log("/api/v1/user/"+e+"/avatar"),m().get("/api/v1/user/"+e+"/avatar",{responseType:"blob"})}},re={components:{TreeItem:M},data:function(){return{open:!1,UI:{shown:!0,isMini:!0},navigation:[{id:"Drive",icon:"cloud"},{id:"ShareWithMe",icon:"folder_shared"}],activeItem:null,previewURL:"/static/image/folderYellow.svg"}},props:["item"],methods:{toggle:function(){if(console.log(")))))"),console.log(this.item),this.open=!this.open,this.item&&this.item.info&&this.item.info.sharedWith&&0!=this.item.info.sharedWith){var e=!0,t=!1,n=void 0;try{for(var r,a=te()(this.item.info.sharedWith);!(e=(r=a.next()).done);e=!0){var s=r.value;this.loadAvatar(s)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},toggleSize:function(e){e!=this.activeItem&&this.activeItem||(this.UI.isMini=!this.UI.isMini)},chooseItem:function(e){var t=this;return i()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:"Drive"==e.id&&t.$router.push({name:e.id,params:{id:t.$store.state.user.myDrive}}),"ShareWithMe"==e.id&&t.$router.push({name:e.id,params:{id:t.$store.state.user.sharedWithMe.id}}),t.toggleSize(e),t.activeItem=e;case 4:case"end":return n.stop()}},n,t)}))()},loadAvatar:function(e){var t=new FileReader,n=this;t.onload=function(e){n.previewURL=t.result},ne.showAvatar(e._id).then(function(e){return e.data}).then(function(e){t.readAsDataURL(e)}).catch(function(e){console.log(e)})}}},ae={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{fixed:"",clipped:"",app:"",right:""},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[e.item&&e.item.info?[n("v-card-title",[n("h1",[e._v(e._s(e.item.info.name))])]),e._v(" "),n("v-divider"),e._v(" "),e.item.info.isFolder?[n("v-card-media",{attrs:{src:"/static/image/folderImage.svg",height:"250px",contain:""}})]:e._e(),e._v(" "),n("v-divider"),e._v(" "),e.item.info.sharedWith&&0==e.item.info.sharedWith.length?[n("v-icon",[e._v("lock")]),n("span",[e._v("Вы жадина-говядина соленый огурец")])]:e._l(e.item.info.sharedWith,function(t,r){return n("v-avatar",{key:r},[n("img",{attrs:{src:e.previewURL}})])}),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[e._v("\n      Name: "),n("b",[e._v(e._s(e.item.info.name))]),e._v(" "),n("br"),e._v("\n      Type: "),n("b",[e._v("Folder")]),e._v(" "),n("br"),e._v("\n      Created: "),n("b",[e._v(e._s(e.item.info.info.created))]),n("br"),e._v("\n      Modified: "),n("b",[e._v(e._s(e.item.info.info.modified))])])]:e._e()],2)},staticRenderFns:[]},se=n("VU/8")(re,ae,!1,null,null,null).exports,oe={data:function(){return{show:!1}},props:["item"],watch:{item:function(){this.show=Boolean(this.item)}},methods:{removeFolder:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$emit("remove",this.item);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),closeDialog:function(){this.show=!1,this.$emit("close")}}},ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.item?[n("v-card",[n("v-card-title",[n("h1",[e._v("Remove folder "+e._s(e.item.name)+" ("+e._s(e.item.id)+")")])]),e._v(" "),n("v-card-text",[e._v("\n          Are you sure?\n        ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{flat:"",color:"error"},on:{click:function(t){t.stopPropagation(),e.removeFolder()}}},[e._v("Remove")]),e._v(" "),n("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){e.closeDialog()}}},[e._v("Cancel")])],1)],1)]:e._e()],2)],1)},staticRenderFns:[]},ce={components:{InfoSidebar:se,TreeItem:M,Toolbar:S,Sidebar:C,CardItem:q,DropFile:Q,RenameDialog:j,ShareDialog:Y,dialogRemove:n("VU/8")(oe,ie,!1,null,null,null).exports},data:function(){return{showDropZone:!1,rename:!1,share:!1,menuOptions:[{id:"rename",label:"Rename",icon:"edit",secondaryText:"Ctrl+E"},{id:"copy",label:"Duplicate",icon:"content_copy",secondaryText:"Ctrl+D"},{id:"share",label:"Share",icon:"share",secondaryText:"Ctrl+Shift+S"},{type:"divider"},{id:"delete",label:"Delete",icon:"delete",secondaryText:"Del"}],Menu:{data:{}},folderID:null,item:{info:null,children:null},tree:null,path:null,clearFilterString:!1,loadItem:!1,loadText:"load",itemToRemove:null,remove:!1}},created:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.processRouter(this.$route.params),e.next=3,this.getMyDriveTree();case 3:return e.next=5,this.load();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),watch:{page:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},beforeRouteUpdate:function(e,t,n){var r=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.clearFilterString=!0,r.processRouter(e.params),t.next=4,r.load();case 4:r.clearFilterString=!1,n();case 6:case"end":return t.stop()}},t,r)}))()},methods:{handleDrop:function(e,t){this.showDropZone=t},onCtxOpen:function(e){this.Menu.data=e},menuCall:function(e){var t=this;return i()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("delete"==e.id&&t.openRemoveDialog(t.Menu.data),"rename"==e.id&&t.openRenameDialog(),"copy"!=e.id){n.next=5;break}return n.next=5,t.copyFolder(t.Menu.data);case 5:"share"==e.id&&t.openShareDialog();case 6:case"end":return n.stop()}},n,t)}))()},addNewItem:function(e){var t=this;return i()(s.a.mark(function n(){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loadItem=!0,t.loadText="Try to create a new item",n.prev=2,console.log(e),console.log("Try folder"),n.next=7,x.addNewFolder(t.$route.params.id,e);case 7:(r=n.sent).data.success&&(console.log("folder"),t.$message({message:'"'+r.data.folder.name+'" has been created',type:"success",icon:"new_releases"}),t.loadItem=!1,t.item.children.push(r.data.folder),t.getMyDriveTree()),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),t.loadItem=!1,console.log(n.t0);case 15:case"end":return n.stop()}},n,t,[[2,11]])}))()},addNewFile:function(e){var t=this;return i()(s.a.mark(function n(){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loadItem=!0,t.loadText="Try to upload a new file",e.isFolder=!1,console.log("++++"),console.log(e),n.prev=5,n.next=8,x.addNewFile(t.$route.params.id,e);case 8:r=n.sent,console.log("Try"),r.data.success&&(t.$message({message:'"'+r.data.folder.name+'" has been created',type:"success",icon:"new_releases"}),t.loadItem=!1,console.log("file"),t.item.children.push(r.data.folder),t.getMyDriveTree()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(5),console.log(n.t0);case 16:case"end":return n.stop()}},n,t,[[5,13]])}))()},addNew:function(e){var t=this;return i()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$message({message:'"'+e.name+'" has been created',type:"success",icon:"new_releases"}),t.item.children.push(e),t.getMyDriveTree();case 3:case"end":return n.stop()}},n,t)}))()},removeFolder:function(e){var t=this;return i()(s.a.mark(function n(){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.closeRemoveDialog(),n.prev=1,console.log("REMOVE"),console.log(t.item),n.next=6,x.removeFolder(e._id);case 6:r=n.sent,console.log(r.data),r.data.success&&(t.item.children.splice(t.item.children.indexOf(e),1),t.getMyDriveTree(),t.$message({message:"Item has been removed",type:"success",icon:"new_releases"})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0);case 14:case"end":return n.stop()}},n,t,[[1,11]])}))()},openRemoveDialog:function(e){this.itemToRemove=e},closeRemoveDialog:function(){this.itemToRemove=null},renameFolder:function(e){var t=this;return i()(s.a.mark(function n(){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.closeRenameDialog(),n.prev=1,n.next=4,x.renameFolder(t.Menu.data._id,e);case 4:r=n.sent,console.log(r.data),r.data.success&&(t.item.children[t.item.children.indexOf(t.Menu.data)].name=e.name,console.log(e.name),t.getMyDriveTree(),t.$message({message:'Item has been renamed to "'+r.data.folder.name+'"',type:"success",icon:"new_releases"})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0);case 12:case"end":return n.stop()}},n,t,[[1,9]])}))()},openRenameDialog:function(){this.rename=!this.rename,console.log(this.rename)},closeRenameDialog:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(3),e.rename=!1;case 2:case"end":return t.stop()}},t,e)}))()},copyFolder:function(e){var t=this;return i()(s.a.mark(function n(){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x.copyFolder(e._id);case 3:r=n.sent,console.log(r.data),r.data.success&&(t.item.children.push(r.data.folder),t.getMyDriveTree(),t.$message({message:"Congrats, this is a success message.",type:"success"})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},n,t,[[0,8]])}))()},shareFolder:function(e){var t=this;return i()(s.a.mark(function n(){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.closeShareDialog(),n.prev=1,n.next=4,x.shareFolder(t.Menu.data._id,e);case 4:(r=n.sent).data.success&&(console.log(r.data),t.$message({message:"Shared success",type:"success",icon:"new_releases"})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}},n,t,[[1,8]])}))()},openShareDialog:function(){this.share=!this.share},closeShareDialog:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.share=!1;case 1:case"end":return t.stop()}},t,e)}))()},processRouter:function(e){console.log(e),e&&e.id?this.folderID=e.id:this.folderID=this.folderID||this.$store.state.user.myDrive},load:function(){var e=this;return i()(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.$store.state.user,t.next=4,x.get(e.folderID);case 4:if(!(r=t.sent).data.success){t.next=9;break}return e.item=r.data.folder,t.next=9,e.getPath();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,e,[[0,11]])}))()},getMyDriveTree:function(){var e=this;return i()(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.$store.state.user,t.next=4,x.get(n.myDrive);case 4:(r=t.sent).data.success&&(e.tree=r.data.folder.children,0==e.tree.length&&(e.tree=[{name:"Empty"}]),console.log(e.tree)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},getPath:function(){var e=this;return i()(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getPath(e.folderID);case 3:(n=t.sent).data.success&&(e.path=n.data.path,console.log(e.path)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},findByName:function(e){var t=this;return i()(s.a.mark(function n(){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,""!=e){n.next=5;break}return n.next=4,t.load();case 4:return n.abrupt("return");case 5:return n.next=7,x.findByName(e);case 7:(r=n.sent).data.success&&(t.item=r.data),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}},n,t,[[0,11]])}))()},toggleInfoSidebar:function(){this.$refs["info-sidebar"].toggle()}}},le={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{on:{dragover:function(t){e.handleDrop(t,!0)},dragleave:function(t){e.handleDrop(t,!1)},drop:function(t){e.handleDrop(t,!1)}}},[n("sidebar",{attrs:{tree:e.tree}}),e._v(" "),n("toolbar",{attrs:{clearFilterString:e.clearFilterString,path:e.path,edit:!0},on:{addNewItem:e.addNewItem,toggleInfoSidebar:e.toggleInfoSidebar,addNewFile:e.addNewFile,changeFilter:e.findByName}}),e._v(" "),n("info-sidebar",{ref:"info-sidebar",attrs:{item:e.item}}),e._v(" "),e.item?n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[e.item.children&&e.item.children.length>0?e._l(e.item.children,function(t,r){return n("v-flex",{key:r,attrs:{xs2:""},on:{contextmenu:function(n){n.preventDefault(),e.$refs.ctx.open(n,t)}}},[n("card-item",{attrs:{item:t}})],1)}):[n("v-flex",[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[e._v("Empty")])])])],1)],1)]],2)],1):e._e(),e._v(" "),n("context-menu",{ref:"ctx",on:{"ctx-open":e.onCtxOpen}},[n("ui-menu",{staticClass:"text-xs-left",attrs:{"contain-focus":"","has-icons":"","has-secondary-text":"",options:e.menuOptions},on:{select:function(t){e.menuCall(t)}}})],1),e._v(" "),n("rename-dialog",{attrs:{open:e.rename,oldName:e.Menu.data.name},on:{close:e.closeRenameDialog,rename:e.renameFolder}}),e._v(" "),n("share-dialog",{attrs:{open:e.share},on:{close:e.closeShareDialog,share:e.shareFolder}}),e._v(" "),n("dialog-remove",{attrs:{item:e.itemToRemove},on:{remove:e.removeFolder,close:e.closeRemoveDialog}}),e._v(" "),n("drop-file",{directives:[{name:"show",rawName:"v-show",value:e.showDropZone,expression:"showDropZone"}],on:{addFile:e.addNew}}),e._v(" "),n("v-snackbar",{attrs:{bottom:!0,left:!0},model:{value:e.loadItem,callback:function(t){e.loadItem=t},expression:"loadItem"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"amber"}}),e._v("\n    "+e._s(e.loadText)+"\n  ")],1)],1)},staticRenderFns:[]},ue=n("VU/8")(ce,le,!1,function(e){n("FT/n")},"data-v-21a264ac",null).exports,de={components:{InfoSidebar:se,TreeItem:M,Toolbar:S,Sidebar:C,CardItem:q,DropFile:Q,RenameDialog:j,ShareDialog:Y},data:function(){return{showDropZone:!1,rename:!1,share:!1,Menu:{data:{}},folderID:null,item:{info:null,children:null},tree:null,path:null}},created:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.processRouter(this.$route.params),e.next=3,this.getSharedTree();case 3:return e.next=5,this.load();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),watch:{page:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},beforeRouteUpdate:function(e,t,n){var r=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.processRouter(e.params),t.next=3,r.load();case 3:n();case 4:case"end":return t.stop()}},t,r)}))()},methods:{processRouter:function(e){e&&e.id?this.folderID=e.id:this.folderID=this.folderID||this.$store.state.user.myDrive},load:function(){var e=this;return i()(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.$store.state.user,t.next=4,x.getSharedFolder(e.folderID);case 4:if(!(r=t.sent).data.success){t.next=9;break}return e.item=r.data.folder,t.next=9,e.getPath();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,e,[[0,11]])}))()},getSharedTree:function(){var e=this;return i()(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.$store.state.user,t.next=4,x.getSharedTree(n.sharedWithMe.id);case 4:(r=t.sent).data.success&&(e.tree=r.data.folders,0==e.tree.length&&(e.tree=[{name:"Empty"}]),console.log(e.tree)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},getPath:function(){var e=this;return i()(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getPath(e.folderID);case 3:(n=t.sent).data.success&&(e.path=n.data.path,e.path[0]={id:e.$store.state.user.sharedWithMe.id,name:"Shared with me "},console.log(e.path)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},toggleInfoSidebar:function(){this.$refs["info-sidebar"].toggle()}}},pe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{on:{dragover:function(t){e.handleDrop(t,!0)},dragleave:function(t){e.handleDrop(t,!1)},drop:function(t){e.handleDrop(t,!1)}}},[n("sidebar",{attrs:{tree:e.tree}}),e._v(" "),n("toolbar",{attrs:{path:e.path,edit:!1},on:{toggleInfoSidebar:e.toggleInfoSidebar}}),e._v(" "),n("info-sidebar",{ref:"info-sidebar",attrs:{item:e.item}}),e._v(" "),e.item?n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[e.item.children&&e.item.children.length>0?e._l(e.item.children,function(e,t){return n("v-flex",{key:t,attrs:{xs3:""}},[n("card-item",{attrs:{item:e}})],1)}):[n("v-flex",[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[e._v("Empty")])])])],1)],1)]],2)],1):e._e()],1)},staticRenderFns:[]},ve=n("VU/8")(de,pe,!1,function(e){n("+GjM")},"data-v-3a22fdc4",null).exports,he={components:{},data:function(){return{credentials:{username:null,password:null},items:[]}},methods:{login:function(){var e=i()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("LOGIn"),e.next=4,w.login(this.credentials);case 4:t=e.sent,console.log(t.data),t.data.success&&(this.$store.dispatch("setUser",t.data.user),this.$store.dispatch("setAccessToken",t.data.tokens.access),this.$store.dispatch("setRefreshToken",t.data.tokens.refresh),this.$router.push({name:"Drive",params:{id:this.$store.state.user.myDrive}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),logout:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.logout({username:this.$store.state.username,password:this.$store.state.password});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:this.$store.dispatch("setUser",null),this.$store.dispatch("setAccessToken",null),this.$store.dispatch("setRefreshToken",null),this.$router.push({name:"Start"});case 11:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}(),enter:function(){this.$router.push({name:"Drive",params:{id:this.$store.state.user.myDrive}})}}},fe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[e.$store.getters.isLogged()?n("v-card",{attrs:{flat:""}},[n("v-card-actions",[n("v-btn",{attrs:{block:""},on:{click:function(t){t.stopPropagation(),e.enter()}}},[e._v("My DRIVE")]),e._v(" "),n("v-btn",{attrs:{block:""},on:{click:function(t){t.stopPropagation(),e.logout()}}},[e._v("Log out")])],1)],1):n("v-card",{attrs:{flat:""}},[n("v-card-title",[n("h1",[e._v("Login")])]),e._v(" "),n("v-card-text",[n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Username"},model:{value:e.credentials.username,callback:function(t){e.$set(e.credentials,"username",t)},expression:"credentials.username"}})],1)],1),e._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{block:""},on:{click:function(t){t.stopPropagation(),e.login()}}},[e._v("Login")])],1)],1)],1)],1)],1)},staticRenderFns:[]},me=n("VU/8")(he,fe,!1,null,null,null).exports,ge={components:{},data:function(){return{error:!1,timeout:5e3,text:"Hello, I'm a snackbar",registration:{name:null,username:null,password:null,email:null},rules:{required:function(e){return!!e||"Required."},name:function(e){return/[A-Z][A-Za-z' -]*/.test(e)||"Invalid Name."},username:function(e){return/^[a-z\d\.]{5,}$/.test(e)||"Invalid Name."},password:function(e){return/^[A-Za-z0-9' ]{8,}$/.test(e)||"Invalid Name."},email:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid e-mail."}}}},methods:{signup:function(){var e=i()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,w.signup(this.registration);case 4:t=e.sent,console.log(t.data),t.data.success&&this.$emit("signup",this.create),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(1),this.error=!0,this.text=e.t0.response.data.message||e.t0.message,console.log("ENTER"),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}(),logout:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.logout({username:this.$store.state.username,password:this.$store.state.password});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:this.$store.dispatch("setUser",null),this.$store.dispatch("setAccessToken",null),this.$store.dispatch("setRefreshToken",null),this.$router.push({name:"Start"});case 11:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}(),enter:function(){this.$router.push({name:"Drive",params:{id:this.$store.state.user.myDrive}})}}},we={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[e.$store.getters.isLogged()?n("v-card",{attrs:{flat:""}},[n("v-card-actions",[n("v-btn",{attrs:{block:""},on:{click:function(t){t.stopPropagation(),e.enter()}}},[e._v("My DRIVE")]),e._v(" "),n("br"),e._v(" "),n("v-btn",{attrs:{block:""},on:{click:function(t){t.stopPropagation(),e.logout()}}},[e._v("Log out")])],1)],1):n("v-card",{attrs:{flat:""}},[n("v-card-title",[n("h1",[e._v("Sign Up")])]),e._v(" "),n("v-card-text",[n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Name",rules:[e.rules.required,e.rules.name]},model:{value:e.registration.name,callback:function(t){e.$set(e.registration,"name",t)},expression:"registration.name"}})],1)],1),e._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Username",rules:[e.rules.required,e.rules.username]},model:{value:e.registration.username,callback:function(t){e.$set(e.registration,"username",t)},expression:"registration.username"}})],1)],1),e._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Password",type:"password",rules:[e.rules.required,e.rules.password]},model:{value:e.registration.password,callback:function(t){e.$set(e.registration,"password",t)},expression:"registration.password"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{block:""},on:{click:function(t){t.stopPropagation(),e.signup()}}},[e._v("Sign Up")])],1),e._v(" "),n("v-snackbar",{attrs:{timeout:e.timeout,top:!0,right:!0},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v("\n          "+e._s(e.text)+"\n          "),n("v-btn",{attrs:{flat:"",icon:"",color:"red"},nativeOn:{click:function(t){e.error=!1}}},[n("v-icon",[e._v("close")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},xe=n("VU/8")(ge,we,!1,null,null,null).exports,_e={components:{Login:me,SignUp:xe},data:function(){return{login:!1}},methods:{change:function(){this.login=!this.login}}},ke={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs8:""}},[n("v-card",{attrs:{id:"app",height:"100%"}},[n("v-card-title")],1)],1),e._v(" "),n("v-flex",[n("v-card",{attrs:{height:"100%"}},[n("v-card-actions",[n("v-spacer"),e._v(" "),e.login?n("v-btn",{attrs:{flat:""},on:{click:function(t){e.change()}}},[n("h2",[e._v("Sign up")])]):n("v-btn",{attrs:{flat:""},on:{click:function(t){e.change()}}},[n("h2",[e._v("Login")])])],1),e._v(" "),n("v-card-media",[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[n("v-flex",{staticClass:"text-xs-center"},[e.login?n("login"):n("sign-up",{on:{signup:function(t){e.change()}}})],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},be=n("VU/8")(_e,ke,!1,function(e){n("CaFx")},"data-v-7eabace4",null).exports,ye={data:function(){return{previewURL:"/static/image/folderYellow.svg"}},props:[],created:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.$store.state.user.avatar),!this.$store.state.user.avatar){e.next=5;break}return console.log("ENTER"),e.next=5,this.loadPreview();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{hookUploadFile:function(e,t){var n=this;return i()(s.a.mark(function r(){var a,o;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a={name:e.name,img:e.raw},r.prev=1,r.next=4,ne.setAvatar(n.$store.state.user.id,a);case 4:(o=r.sent).data.success&&(console.log("SUCCESS"),n.loadPreview()),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),console.log(r.t0);case 11:t.splice(0,t.length);case 12:case"end":return r.stop()}},r,n,[[1,8]])}))()},loadPreview:function(){var e=new FileReader,t=this;e.onload=function(n){console.log(n),t.previewURL=e.result},ne.showAvatar(this.$store.state.user.id).then(function(e){return console.log("success"),e.data}).then(function(t){e.readAsDataURL(t)}).catch(function(e){console.log(e)})}}},Fe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",{attrs:{"grid-list-md":""}},[t("v-layout",{attrs:{row:""}},[t("v-flex",{attrs:{xs12:"",sm10:"","offset-sm1":""}},[t("v-card",[t("v-container",{attrs:{fluid:"","grid-list-lg":""}},[t("v-layout",{attrs:{row:""}},[t("v-flex",{attrs:{xs5:""}},[t("v-card-media",{attrs:{src:this.previewURL,height:"250px",contain:""}}),this._v(" "),t("v-card-actions",[t("v-spacer"),this._v(" "),t("el-upload",{ref:"list",staticClass:"upload-demo",attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":this.hookUploadFile}},[t("v-btn",[t("v-icon",[this._v("file_upload")]),t("span",[this._v("Upload new avatar")])],1)],1),this._v(" "),t("v-spacer")],1)],1),this._v(" "),t("v-flex",{attrs:{xs7:""}},[t("div",[t("div",{staticClass:"headline"},[t("h1",[this._v(this._s(this.$store.state.user.name))])])]),this._v(" "),t("v-card-text",[t("v-list",{attrs:{"two-line":""}},[t("v-list-tile",{on:{click:function(e){}}},[t("v-list-tile-action",[t("v-icon",[this._v("face")])],1),this._v(" "),t("v-list-tile-content",[t("v-list-tile-title",[this._v(this._s(this.$store.state.user.username))]),this._v(" "),t("v-list-tile-sub-title",[this._v("Username")])],1)],1),this._v(" "),t("v-divider",{attrs:{inset:""}}),this._v(" "),t("v-list-tile",{on:{click:function(e){}}},[t("v-list-tile-action",[t("v-icon",[this._v("mail")])],1),this._v(" "),t("v-list-tile-content",[t("v-list-tile-title",[this._v("aliconnors@example.com")]),this._v(" "),t("v-list-tile-sub-title",[this._v("Personal")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},De=n("VU/8")(ye,Fe,!1,null,null,null).exports,$e={data:function(){return{id:this.$route.params.id,item:null,data:null,loadItem:!0}},created:function(){var e=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.id),e.next=3,x.get(this.id);case 3:return this.item=e.sent,this.loadItem=!0,e.next=7,this.showFile();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{showFile:function(){var e=this;return i()(s.a.mark(function t(){var n,r,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("SHOW FILE ENTER"),t.next=4,x.showFile(e.id);case 4:n=t.sent,console.log("SUCCESS"),r=e,(a=new FileReader).onload=function(e){r.$refs.preview.src=a.result},a.readAsDataURL(n.data),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}},t,e,[[0,12]])}))()}}},Re={render:function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),this._v(" "),t("div",[t("img",{ref:"preview"})])],1)},staticRenderFns:[]},Ie=n("VU/8")($e,Re,!1,null,null,null).exports;r.default.use(D.a);var Te=new D.a({routes:[{path:"/",name:"Start",component:be},{path:"/my-drive/",name:"MyDrive",component:ue},{path:"/my-drive/:id",name:"Drive",component:ue},{path:"/shared/:id",name:"ShareWithMe",component:ve},{path:"/login",name:"Login",component:me},{path:"/signup",name:"Signup",component:xe},{path:"/profile",name:"Profile",component:De},{path:"/my-drive/:id/showFile",name:"ShowFile",component:Ie}]}),Se=n("9JMe"),Ue=n("zL8q"),Le=n.n(Ue),Me=n("kxCb"),Ne=n.n(Me),Ee=(n("PTkT"),n("7zck"),n("tvR6"),n("3EgV")),Ce=n.n(Ee),Ae=n("+jlW"),Oe=n.n(Ae);r.default.config.productionTip=!1,Object(Se.sync)(p,Te),r.default.component("drag",K.Drag),r.default.component("drop",K.Drop),r.default.use(Oe.a),r.default.use(Le.a),r.default.use(Ce.a),r.default.use(Ne.a),new r.default({el:"#app",router:Te,store:p,template:"<App/>",components:{App:F}})},NREx:function(e,t){},PTkT:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f7f2679bc9132e060c3b.js.map